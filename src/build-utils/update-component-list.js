const fs = require('fs');
const path = require('path');

const componentList = fs
  .readdirSync(path.resolve(__dirname, '../components'))
  .filter(component => fs.existsSync(path.resolve(__dirname, `../components/${component}/README.md`)));

const componentsFileContent = `\
/**
 * Generated by: src/build-utils/update-comoonent-list.js
 * Generated on: ${new Date().toDateString()}
 */

module.exports = [
${componentList
    .map(component => `  '/src/components/${component}/',`)
    .join('\n')}
];
`;

fs.writeFileSync(path.resolve(__dirname, '../../.vuepress/component-list.js'), componentsFileContent);
